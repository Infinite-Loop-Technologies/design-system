import type { CommitListener, CommitOptions, CommitRecord, DispatchIntentOptions, EventListener, GraphState, GraphiteStore, GraphiteStoreOptions, IntentProducer, MutationOperatorHandler, MutationPatch, QueryCapabilityScope, QueryInput, QueryInvalidationListener, QueryOperatorHandler, QueryRunEvent, QueryRunListener, QuerySubscription, QueryWatchOptions, StateListener } from './types';
export declare class GraphiteRuntime<TState extends GraphState = GraphState> implements GraphiteStore<TState> {
    private readonly mutationOperators;
    private readonly queryOperators;
    private readonly intentProducers;
    private readonly queryPlanCache;
    private readonly commitListeners;
    private readonly eventListeners;
    private readonly queryRunListeners;
    private readonly invalidationListeners;
    private readonly stateListeners;
    private readonly activeQueries;
    private readonly maxCommits;
    private readonly eventMode;
    private readonly idFactory;
    private state;
    private commits;
    private undoStack;
    private redoStack;
    private commitCounter;
    private idCounter;
    constructor(options?: GraphiteStoreOptions<TState>);
    getState(): Readonly<TState>;
    commit(patch: MutationPatch, options?: CommitOptions<TState>): CommitRecord<TState>;
    materializeExternalPatch(patch: MutationPatch, metadata?: Record<string, unknown>): CommitRecord<TState>;
    query<TResult>(query: QueryInput<TState, TResult>, scope?: QueryCapabilityScope): TResult;
    watchQuery<TResult>(query: QueryInput<TState, TResult>, listener: (value: TResult, event: QueryRunEvent<TState, TResult>) => void, options?: QueryWatchOptions<TState, TResult>): QuerySubscription<TState, TResult>;
    registerMutationOperator(name: string, handler: MutationOperatorHandler<TState>): () => void;
    registerQueryOperator(name: string, handler: QueryOperatorHandler<TState>): () => void;
    registerIntent<TPayload>(name: string, producer: IntentProducer<TState, TPayload>): () => void;
    dispatchIntent<TPayload>(name: string, payload: TPayload, options?: DispatchIntentOptions<TState>): CommitRecord<TState> | null;
    onCommit(listener: CommitListener<TState>): () => void;
    onEvent(listener: EventListener<TState>): () => void;
    onQueryRun(listener: QueryRunListener<TState>): () => void;
    onInvalidation(listener: QueryInvalidationListener<TState>): () => void;
    onState(listener: StateListener<TState>): () => void;
    getCommitLog(): readonly CommitRecord<TState>[];
    canUndo(): boolean;
    canRedo(): boolean;
    undo(recordOrId?: string | CommitRecord<TState>): CommitRecord<TState> | null;
    redo(recordOrId?: string | CommitRecord<TState>): CommitRecord<TState> | null;
    private nextId;
    private getCompiledQuery;
    private executeQuery;
    private runActiveQuery;
    private updateHistoryStacks;
    private clampHistory;
    private toRequestedCommitId;
    private invalidateQueries;
    private resolveEvent;
}
export declare function createGraphStore<TState extends GraphState = GraphState>(options?: GraphiteStoreOptions<TState>): GraphiteRuntime<TState>;
//# sourceMappingURL=core.d.ts.map